.anchorable-heading {
  position: relative;
  // pointer-events: none;

  // &__link, &__text {
  //   pointer-events: initial;
  // }

  &__link {
    font-size: 14px;
    font-weight: normal;
    margin-left: -18px;
    vertical-align: middle;
    padding-right: 4px;
    visibility: hidden;

    &:hover, &:active, &:focus {
      text-decoration: none;
      font-weight: normal;
      outline: none;
    }

    &--trailing {
      margin-left: 1em;
      padding-right: 0.4em;
      font-size: 1em;
      text-decoration: none;
      vertical-align: middle;
    }
  }

  &:hover &__link {
    visibility: visible;
  }
}

.root--with-multi-page-layout .anchorable-heading {
  @offset: @banner-height + @banner-border-dim + @whitespace;

  &__anchor {
    position: relative;
    top: -1 * @offset;

    &:before {
      content: '';
    }
  }

  &[id]:before {
    content: '';
    display: block;

    // This is so crazy that it works, but it works perfectly. Credit goes to
    // the answer by Jan on http://stackoverflow.com/questions/10732690/offsetting-an-html-anchor-to-adjust-for-fixed-header
    //
    // We need this for the browser to scroll correctly to the heading anchors,
    // ignoring the fixed space on top (occupied by the banner.)
    margin-top: -1 * @offset;
    padding-top: @offset;
    z-index: -1;
  }
}

.root--with-single-page-layout .anchorable-heading {
  @offset: @whitespace;

  &__anchor {
    position: relative;
    top: -1 * @offset;

    &:before {
      content: '';
    }
  }

  &[id]:before {
    content: '';
    display: block;
    margin-top: -1 * @offset;
    padding-top: @offset;
  }
}

.schemable({
  .anchorable-heading__link {
    color: @base1 !important;
    .unmark-link-external()
  }
});